!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=function(){function t(t,e){var r=this;this.el=t,this.filePicker=e,this.audio=document.createElement("audio"),this.audio.setAttribute("autoplay","true"),this.filePicker.addEventListener("change",function(t){r.audioFile=t.target.files[0];var e=new FileReader;e.onload=function(t){return r.createSVG(t.target.result)},e.readAsArrayBuffer(r.audioFile)})}return t.prototype.createSVG=function(t){var e=this,r=new AudioContext,i=r.createBufferSource();return r.decodeAudioData(t).then(function(t){e.audiowaveform=new n.AudioWaveform(t,e.audio,e.el),i.buffer=t,i.connect(r.destination),window.setInterval(function(){e.audiowaveform.updateAudioPosition()},1e3/60),e.audio.src=URL.createObjectURL(e.audioFile)}).catch(console.error)},t.getInstance=function(t,e){return new this(t,e)},t}();document.addEventListener("DOMContentLoaded",function(){i.getInstance(document.querySelector("svg"),document.querySelector("input"))})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,r){this.audioBuffer=t,this.audio=e,this.svg=r,this.smoothing=2,this.RMS=function(t){return Math.sqrt(t.reduce(function(t,e){return t+Math.pow(e,2)},0)/t.length)},this.avg=function(t){return t.reduce(function(t,e){return t+e},0)/t.length},this.max=function(t){return t.reduce(function(t,e){return Math.max(t,e)},0)};var n=this.svg.getAttribute("width"),i=this.svg.getAttribute("height");this.width=parseInt(n),this.height=parseInt(i);var o=this.createWaveformData(t,this.width/this.smoothing);this.svg.querySelector("path").setAttribute("d",this.createSVGPath(o)),this.progress=this.svg.querySelector(".aw-progress"),this.remaining=this.svg.querySelector(".aw-remaining")}return t.prototype.createWaveformData=function(t,e){for(var r=t.getChannelData(0),n=t.getChannelData(1),i=new Float32Array(e),o=Math.round(r.length/e),u=0,a=0,s=[];u<r.length;u++){var c=(Math.abs(r[u])+Math.abs(n[u]))/2;s.push(c),s.length===o&&(i[a++]=this.avg(s),s=[])}return i},t.prototype.createSVGPath=function(t){for(var e=this.max(t),r="M 0 "+this.height+" ",n=0;n<t.length;n++)r+="L "+n*this.smoothing+" "+(1-t[n]/e)*this.height+" ";return r+="V "+this.height+" H 0 Z"},t.prototype.updateAudioPosition=function(){var t=this.audio,e=t.currentTime/t.duration*this.width;e&&(this.progress.setAttribute("width",e),this.remaining.setAttribute("x",e),this.remaining.setAttribute("width",this.width-e))},t}();e.AudioWaveform=n}]);